{
  "variables": {
    "aws_access_key": "{{env `AWS_ACCESS_KEY_ID`}}",
    "aws_secret_key": "{{env `AWS_SECRET_ACCESS_KEY`}}",
    "aws_region": "{{env `AWS_REGION`}}",
    "aws_ami": "{{env `AWS_AMI`}}",
    "org_id": "{{env `ORG_ID`}}",
    "upstream_cns_mirror": "{{env `upstream_cns_mirror`}}",
    "activation_key": "{{env `ACT_KEY`}}",
    "vpc_id": "{{env `VPC_ID`}}",
    "subnet_id": "{{env `SUBNET_ID`}}",
    "instructor_pub_key_file": "{{ env `INSTRUCTOR_PUB_KEY_FILE` }}"
  },
  "builders": [{
    "communicator": "ssh",
    "ssh_timeout": "10m",
    "ssh_username": "ec2-user",
    "type": "amazon-ebs",
    "access_key": "{{user `aws_access_key`}}",
    "secret_key": "{{user `aws_secret_key`}}",
    "region": "{{user `aws_region`}}",
    "vpc_id": "{{user `vpc_id`}}",
    "subnet_id": "{{user `subnet_id`}}",
    "source_ami": "{{user `aws_ami`}}",
    "instance_type": "t2.medium",
    "launch_block_device_mappings": [
    {
      "device_name": "/dev/xvdb",
      "volume_size": 20,
      "volume_type": "gp2",
      "delete_on_termination": true
    }],
    "ami_name": "ocp-cns-aio-{{timestamp}}",
    "ami_regions": ["eu-west-1", "eu-central-1", "us-east-1", "us-west-2", "ap-southeast-1"],
    "ami_users": ["474137545249","685738588177","380547318772","696654831953","094417287411","334315369117","519782693500","771002698755","854756219546","679263250991","956753954451","373182251087","733754555868","972585254144","222319868652","939941778334","921507689537","979150211539","116122769324","103430034902","338622278841","058797739540","904568807503","474591223624","352998834820","942604869426","251165285565","520460751595","444467316921","045733584429","817464044066","619813449352","250941274792","703583610757","447442507985","229702120643","735032796379","874793828835","933248459169","181104821775","455534507208","440764902581","245852284733","527711888568","261323966509","131617215663","790442527540","193643640428","615563463763","711886611295","094133091357","804361941296","338782407588","437097950944","421009409039","323473020308","976589527389","162767402651","284085898817","387721587268","028687619586","135374334716","538944174069","034676792035","179548556944","268287456577","845295361582","435342351181","000872872781","036815347952","938927213531","336388491722","038125005054","797407866095","436730816223","256359593227","580485736347","492232887573","981544430472","378228788310","971213017215","974588280131","183518043592","253028316987","622178831861","404586557851","167297676100","485709659746","582203806581","284162776244","092232232989","434917823479","554236615297","860811681125","115019862024","750727300521","532878204281","128230067114","191814722714","357308243385","105963202211","781360417313","780168881457","074442814228","194134107446","823244527439","748081438407","049012499723","216107651756","356632247021","026196182534","776672829298","743895447739","180847182987","841952334506","652837444760","999746262885","021269411522","626215485747","244983751181","789524810661","614132172837","636664929687","698792987371","154289069994","740798642117","180429956279","367157781511","683212299265","355728672146","735007940947","898328672664","736801550441","242019714243","459507374457","378213451483","948387650007","739497068433","145808420085","344520542304","737940372007","917687950302","535229621613","315636160982","199704969349","830747735312","491757269256","133391779426","518617491931","233162697251","955227956786","883225733424","586741841454","717633338856","756185708482","433361761805","960912251687","344155069124","321267227410","685153915596","026728914271","314915296611","145288774505","909107286133","530913634537","790419071510","556106104969","061105365877","489663576155","704028503819","137493322996","789926691764","882030448971","681474736170","843755302241","112255544801","908451551486","532428876945","466641528528","840304747824","218859480336","386759437019","926844634516","314889856893","673162483118","493960622917","452518102981","146579384345","942501245798","691362516653","473447604360","664068226544","806954219436","854368877440","572613137828","676382193627","928987730083","385667583478","246950426411","703937039192","032214589404","039496725757","209066149248","859649307719","122380599495","362658426346","558690117928","837113781101","701144304334","475681942720","708847160110","344100513215","369736934917","879058169985","792701730673","363546388096","865640539668","384529936371","089051621884","734682511641","945331547645","444891541968","612363899377","710510021040","558760309374","806177753226","265903243866","235654737405","458189406860","596418668604","731916306491","830952427146","509269955486","691994714146","785041905638","015999037064","414565190198","029983000005","057711901866","938377691300","887904127207","377676098909","518909978267","507920523742","559211799362","044693718340","846316591998","664326912182","396890050176","903786522186","883461458119","250909684681","550221688494","305319604905","635157874707","516794798333","029546689009","159235657697","088999690121","632534415376","538432900127","011645854266","955129363098","942376722127","348687162653","688916028372","483705973457","463268722502","664925048504","321773627742","762102674379","626661100074","528834249410","679709182829","147907985896","854916463247","409265774587","234397673400","825955147426","124307789860","484506096426","521964674506","071167455734","735868062465","413075887949","294506217672","873144848482","351532279936","442259101732","577663643168","599847204802","842427280575","621767075860","419361301040","407790644193","232973320101","437355291761","512159871380","479175448032","071191642438","147090633345","688997759606","800921765685","674462327352","617447836119","904362553067","721885071512","873418205258","716319577406","760378188554","292284240963","824215727279","815134149213","378979810258","630084064417","016323958849","713735550063","942413896509","378209571492","351489170233","411488689957","239897778100","846613046762","225304952285","914044868578","965823903676","070372574021","545065178411","606537524146","095378097112","435049905919","354235486229","521596740790","948239571332","233322986953","179523625278","492655902539","798222526813","710328544520","977336034527","654326902945","695352878202","734095549836","665882410464","677354965013","395248254544","434967631794","854302992986","971446475885","778606371887","522811709008","636347343739","656805354373","739740284808","932849391979","275830227667","928847331036","667560407958","633949907373","325367209991","759719611759","843022196540","897505969438","500628042398","581206912618","145734867919","551698772297","647506386366","356355392575","505190179753","464936391421","096307432418","604368013992","955812707812","004325440631","348063952952","344100392002","333304066130","417817238335","950943401753","160261577952","752816095171","999269126684","869540354268","338655340973","527006446907","114301892360","710109093455","945622870536","257073617659","143247534412","316932015839","576549136308","373770490110","963629650889","135126216194","702065931459","844624300671","701147670066","916253825336","957391269747","198631905496","763572530673","142167548069","787533767308","560484980138","560121249438","209797311750","836102530473","711964621117","669275678319","946902960945","667943222590","674893390927","248053005789","046046886676","437329036565","413332681223","236559187975","893661609033","315238680838","079201388834","117839764349","131539212689","678453634550","712527326244","389484554615","258116483608","257036358266","531494672073","052442213405","578626187897","519460532741","622410060024","723228057706","809475196836","358232376523","562238707694","658888331012","702652648079","412700801430","314131720624","885935636073","097781341493","296948599618","355008927148","933686449239","167611881426","212516191202","868882313180","764043365399","772873212128","218832721574","316252729575","023855733132","378921613609","231149158045","599083298904","233930121601","504763744748","452350828629","012738146858","447484660537","603696223072","095619271035","648786901413","387771056607","253791380180","836481430802","234083370377","942574432383","823045635510","628268703880","580763383722","845320932932","929094270251","468616783568","842326980126","795263731384","159684915742","179726230989","612773703069","614872622296","483811334046","703528008179","357426198080","369428275832","259145870721","128993259328","657076519776","265163914537","326972289733","086583192940","715246307418","053354473359","304742111403","321978859438","236533011684","581652203711","343897326795"],
    "ami_description": "OCP 3.10 / OCS 3.10 with all core container images available locally for use by Qwiklabs",
    "tags": {
      "Name": "ocp-cns-qwiklabs",
      "Platform": "Red Hat Enterprise Linux",
      "Release": "3.10.14",
      "OS_Version": "Red Hat Enterprise Linux 7.5",
      "OCP_Version": "OpenShift Enterprise 3.10",
      "CNS_Version": "OpenShift Container Storage 3.10"
    }
  }],
  "provisioners": [{
    "type": "ansible",
    "user": "ec2-user",
    "playbook_file": "site.yml",
    "extra_arguments": [
        "--become",
        "--extra-vars", "rhsm_org_id={{user `org_id`}} rh_upstream_cns_mirror={{user `upstream_cns_mirror`}} rhsm_act_key={{user `activation_key`}} instructor_pub_key_file={{user `instructor_pub_key_file` }}"
      ]
  }]
}
